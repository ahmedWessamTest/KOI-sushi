@if (Statics) {
<!-- Top Section: Greeting & Filter -->
<div class="flex justify-between items-center flex-wrap mb-4">
  <h2 class="text-3xl font-semibold mb-0">
    Hello,
    <!-- Display User Name if Available -->
    @if (name.length > 0) {
    <span class="d-flex align-items-center">{{ name }}</span>
    } ðŸ‘‹
  </h2>

  <div class="relative inline-block">
    <!-- Filter Button -->
    <button
      (click)="toggleDropdown()"
      class="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md shadow-md hover:bg-blue-700 transition">
      <i class="pi pi-calendar"></i>
      Filter
    </button>

    <!-- Dropdown Menu -->
    <div *ngIf="isDropdownOpen" class="absolute left-auto right-0 mt-2 w-96 p-4 flex flex-nowrap z-50">
      <!-- Right: Date Picker -->
      <div class="flex flex-col flex-1 pl-4 date-picker">
        <ngx-daterangepicker-material
          [autoApply]="true"
          [linkedCalendars]="true"
          [alwaysShowCalendars]="true"
          [ranges]="datePresets"
          (choosedDate)="onDateSelected($event)">
        </ngx-daterangepicker-material>

        <button
          (click)="applyFilter()"
          class="mt-3 bg-blue-500 text-white px-4 py-2 rounded-md shadow-md hover:bg-blue-600 transition">
          Apply
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Overall Statistics -->
<div class="grid lg:grid-cols-3 gap-3">
  <p-card>
    <div class="flex justify-between">
      <div>
        <span class="block text-gray-500 font-medium text-lg">Total Orders</span>
        <div class="text-900 text-3xl font-bold">{{ Statics.totalOrders }}</div>
        <div class="text-lg text-gray-500">Total Revenue: {{ Statics.totalOrdersMoney | currency : "EGP " }}</div>
      </div>
      <i class="pi pi-shopping-cart text-blue-500 text-4xl"></i>
    </div>
  </p-card>

  <p-card>
    <div class="flex justify-between">
      <div>
        <span class="block text-gray-500 font-medium text-lg">Delivered Orders</span>
        <div class="text-900 text-3xl font-bold">{{ Statics.totalDelivered }}</div>
        <div class="text-lg text-gray-500">Revenue: {{ Statics.totalDeliveredMoney | currency : "EGP " }}</div>
      </div>
      <i class="pi pi-check-circle text-green-500 text-4xl"></i>
    </div>
  </p-card>

  <p-card>
    <div class="flex justify-between">
      <div>
        <span class="block text-gray-500 font-medium text-lg">Cancelled Orders</span>
        <div class="text-900 text-3xl font-bold">{{ Statics.totalCancelled }}</div>
        <div class="text-lg text-gray-500">Loss: {{ Statics.totalCancelledMoney | currency : "EGP " }}</div>
      </div>
      <i class="pi pi-times-circle text-red-500 text-4xl"></i>
    </div>
  </p-card>
</div>

<!-- Additional Statistics -->
<div class="grid lg:grid-cols-3 gap-3 mt-4">
  <p-card>
    <div class="flex justify-between">
      <div>
        <span class="block text-gray-500 font-medium text-lg">Total Users</span>
        <div class="text-900 text-3xl font-bold">{{ Statics.usersTotal }}</div>
      </div>
      <i class="pi pi-user text-purple-500 text-4xl"></i>
    </div>
  </p-card>

  <p-card>
    <div class="flex justify-between">
      <div>
        <span class="block text-gray-500 font-medium text-lg">Total Categories</span>
        <div class="text-900 text-3xl font-bold">{{ Statics.categoriesTotal }}</div>
      </div>
      <i class="pi pi-tags text-yellow-500 text-4xl"></i>
    </div>
  </p-card>

  <p-card>
    <div class="flex justify-between">
      <div>
        <span class="block text-gray-500 font-medium text-lg">Total Products</span>
        <div class="text-900 text-3xl font-bold">{{ Statics.productsTotal }}</div>
      </div>
      <i class="pi pi-box text-teal-500 text-4xl"></i>
    </div>
  </p-card>
</div>

<!-- Branch-wise Statistics -->
@if (true) {
<h3 class="text-2xl font-semibold mt-6">Branch Performance</h3>
<div class="grid lg:grid-cols-3 gap-3">
  <p-card *ngFor="let branch of Statics.branches">
    <div class="flex justify-between">
      <div>
        <span class="block text-gray-500 font-medium text-lg">{{ branch.title_en }}</span>
        <div class="text-900 text-2xl font-bold">Orders: {{ branch.total_orders }}</div>
        <div class="text-lg text-gray-500">Revenue: {{ branch.total_orders_money | currency : "EGP " }}</div>
        <div class="text-lg text-gray-500">Delivered: {{ branch.delivered_orders }}</div>
        <div class="text-lg text-gray-500">Cancelled: {{ branch.cancelled_orders }}</div>
      </div>
      <i class="pi pi-building text-blue-500 text-4xl"></i>
    </div>
  </p-card>
</div>

<!-- Charts Component -->
<app-charts [Statics]="Statics" />

} }
