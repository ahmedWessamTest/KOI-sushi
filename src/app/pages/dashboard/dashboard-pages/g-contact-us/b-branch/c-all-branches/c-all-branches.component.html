@if (loading) {
  <app-loading-data-banner></app-loading-data-banner>
} @else {
  <div class="card">
    <div class="flex justify-between items-center mb-3">
      <h2 class="text-2xl font-semibold">Branch Control</h2>

      <p-button
        routerLink="/dashboard/contact-us/branches/branches-add"
        label="Add Branch"
        icon="pi pi-plus"
        class="btn-main text-white"
      ></p-button>
    </div>

    <p-table [value]="branches" [loading]="loading" responsiveLayout="scroll">
      <ng-template pTemplate="header">
        <tr>
          <th>ID</th>
          <th>Location (EN)</th>
          <th>City (EN)</th>
          <th>Address (EN)</th>
          <th>Phone</th>
          <th>Status</th>
          <th>Actions</th>
          <th class="text-center">View</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-branch>
        <tr>
          <td>{{ branch.id }}</td>
          <td>{{ branch.title_ar }}</td>
          <td>{{ branch.title_en }}</td>
          <td>{{ branch.address_en }}</td>
          <td>{{ branch.phone_primary }}</td>
          <td>
            <p-inputSwitch
              [ngModel]="branch.status"
              (onChange)="toggleBranchStatus(branch)"
            ></p-inputSwitch>
          </td>
          <td>
            <a
              [routerLink]="[
                '/dashboard/contact-us/branches/branches-edit',
                branch.id,
              ]"
              target="_blank"
              pButton
              rel="noopener noreferrer"
              class="p-button p-component text-black p-button-text"
            >
              <span class="p-button-icon pi pi-pencil"></span>
            </a>
            <!-- <p-button icon="pi pi-trash" (click)="confirmDelete(branch)" class="p-button-text p-button-danger"></p-button> -->
          </td>
          <td class="text-center">
            <button
              [routerLink]="[
                '/dashboard/contact-us/branches/branches-details',
                branch.id,
              ]"
              pButton
              label="View"
              icon="pi pi-search"
            ></button>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="7">
            <div class="h-48 flex justify-center items-center flex-col">
              <app-no-data-found-banner></app-no-data-found-banner>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
}

<p-toast></p-toast>
